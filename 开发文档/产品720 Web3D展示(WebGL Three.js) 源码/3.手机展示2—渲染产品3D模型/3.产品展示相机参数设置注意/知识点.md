# 相机参数设置——产品3D模型整体预览

对于**透视投影相机**而言，一方面相机的位置影响3D模型的**渲染大小**，距离模型越远，模型相对canvas画布越小，另一方面相机的位置影响影响产品的**预览视角**，相机在产品周围位置不同，拍摄效果自然不同。

### 透视投影相机规律

- 视锥体内的网格模型Mesh才会呈现在Canvas画布上
- 远小近大投影规则

### 1. 产品尺寸

在设置相机参数之前，你首先要先确定下产品3D模型的**尺寸范围**，不用精确，比如是几十，还是几百，还是几千，有一个数量级范围即可。

#### 美术与程序协作小问题提醒！！！

美术和程序员最好联合测试下尺寸问题，有些三维软件，导出的时候，可能总会遇到一些小问题，比如15cm长手机，美术按照毫米导出，结束尺寸数字并不是150，而是0.15。

如果美术绘制手机模型，长度尺寸值给的是150，但是软件的单位用的是米，这也没关系，只要按照米导出即可，反正gltf文件只包含数字，没有单位信息。

你可以通过课程中，老师提供的案例源码**包围盒辅助工具—验证美术导出模型.html**计算模型的尺寸范围。


### 2.相机参数预设适配产品3D模型

有一点要**注意**，使用透视投影相机渲染整体预览产品3D模型的时候，相机**位置**、**近裁截面**和**远裁截面**三个参数数值大小要考虑模型的尺寸大小，如果参数随意设置，可以会导致模型无法正常预览或者3D模型渲染不完整。

- 相机位置预设

首先你应该**测量**下你要渲染的场景或者说产品3D模型的**尺寸范围**，然后根据该尺寸**数量级**预先设置相机参数，具体点说，你可以把相机的位置x、y、z坐标设置为和3D模型尺寸范围相同即可，这里的相同并不是严格相同，数量级一致即可。

- 近裁截面和远裁截面   

设置相机**近裁截面**和**远裁截面**的时候，要综合考量产品3D模型**尺寸**和相机**位置**，设置要保证能够完全包含产品3D模型。

### 可视化调整相机参数适配产品3D模型

对于透视投影相机而言，相机控件`OrbitControls`**旋转**和**缩放**本质上就是改变相机的位置坐标`.position`。

- 渲染范围

你想通过设置相机位置参数控制相机渲染**范围**，首先应该测量下你要渲染范围的尺寸，然后根据该尺寸数量级先预览设置下相机位置，然后在通过相机控件`OrbitControls`缩放控制相机范围，选择一个精确的渲染范围，在控制台打印下当前的相机位置坐标即可。

- 渲染视角选择

相机位于手机产品3D模型的不同位置，观察**视角**不同，渲染在canvas画布上的效果肯定不同，如果想设置three.js渲染手机产品的角度，可以通过相机控件`OrbitControls`旋转相机，同时要注意在浏览器控制台实时打印相机坐标，然后选择特定视角对应的相机位置即可。

```js
// 渲染循环
function render() {
  renderer.render(scene, camera); //执行渲染操作
  requestAnimationFrame(render); //请求再次执行渲染函数render，渲染下一帧
  console.log(camera.position);//通过相机控件OrbitControls旋转相机，选择一个合适场景渲染角度
}
```



